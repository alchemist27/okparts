<!--
  ========================================
  ì¹´í˜24 íšŒì›ê°€ì… í¼ - localStorage ì €ì¥ ì½”ë“œ
  ========================================

  ğŸ“‹ ì‚¬ìš© ë°©ë²•:
  1. ì¹´í˜24 ê´€ë¦¬ì > ë””ìì¸ í¸ì§‘ > HTML í¸ì§‘
  2. join.html íŒŒì¼ ì—´ê¸°
  3. íŒŒì¼ ë§¨ ë (</body> ì „)ì— ì•„ë˜ ì½”ë“œ ë³µì‚¬-ë¶™ì—¬ë„£ê¸°
  4. ì €ì¥ í›„ ìºì‹œ ì´ˆê¸°í™”

  âš ï¸ ì£¼ì˜: ì´ ì½”ë“œëŠ” íšŒì›ê°€ì… í¼ ì œì¶œ ì‹œ ì¶”ê°€í•­ëª©ì„ localStorageì— ì €ì¥í•©ë‹ˆë‹¤.
-->

<!-- íŒë§¤ì ì•± ì—°ë™: íšŒì›ê°€ì… ë°ì´í„° ì €ì¥ -->
<script>
(function() {
  console.log('ğŸš€ íŒë§¤ì ì•± ì—°ë™ ìŠ¤í¬ë¦½íŠ¸ (join.html)');

  // íšŒì›ê°€ì… í¼ ì°¾ê¸°
  var joinForm = document.getElementById('joinForm');

  if (!joinForm) {
    console.log('âš ï¸ #joinFormì„ ì°¾ì„ ìˆ˜ ì—†ìŒ, name ì†ì„±ìœ¼ë¡œ ì¬ì‹œë„');
    joinForm = document.querySelector('form[name="joinForm"]');
  }

  if (!joinForm) {
    console.log('âš ï¸ formì„ ì°¾ì„ ìˆ˜ ì—†ìŒ, action ì†ì„±ìœ¼ë¡œ ì¬ì‹œë„');
    joinForm = document.querySelector('form[action*="Member/join"]');
  }

  if (!joinForm) {
    console.error('âŒ íšŒì›ê°€ì… í¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    return;
  }

  console.log('âœ… íšŒì›ê°€ì… í¼ ì°¾ìŒ:', joinForm.id || joinForm.name || 'unknown');

  // í¼ ì œì¶œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
  joinForm.addEventListener('submit', function(e) {
    console.log('ğŸ“ íšŒì›ê°€ì… í¼ ì œì¶œ ê°ì§€');

    try {
      // ì…ë ¥ í•„ë“œ ê°’ ê°€ì ¸ì˜¤ê¸°
      var memberId = document.getElementById('member_id') || document.querySelector('input[name="member_id"]');
      var email1 = document.getElementById('email1') || document.querySelector('input[name="email1"]');
      var email2 = document.getElementById('email2') || document.querySelector('input[name="email2"]') || document.querySelector('select[name="email2"]');
      var nameField = document.getElementById('name') || document.querySelector('input[name="name"]');

      // ì¶”ê°€í•­ëª© (ì¹´í˜24ê°€ ìë™ ìƒì„±í•œ í•„ë“œ)
      var add1 = document.getElementById('add1') || document.querySelector('input[name="add1"]');
      var add2 = document.getElementById('add2') || document.querySelector('input[name="add2"]');
      var add3 = document.getElementById('add3') || document.querySelector('input[name="add3"]');

      // ì´ë©”ì¼ ì¡°í•©
      var email = '';
      if (email1 && email2) {
        var email2Value = email2.value;
        // select ë°•ìŠ¤ì¸ ê²½ìš° option value ê°€ì ¸ì˜¤ê¸°
        if (email2.tagName === 'SELECT') {
          email2Value = email2.options[email2.selectedIndex].value;
        }
        email = email1.value + '@' + email2Value;
      }

      // ë°ì´í„° ê°ì²´ ìƒì„±
      var signupData = {
        member_id: memberId ? memberId.value : '',
        email: email,
        name: nameField ? nameField.value : '',
        businessNumber: add1 ? add1.value : '',
        president: add2 ? add2.value : '',
        phone: add3 ? add3.value : '',
        timestamp: new Date().toISOString()
      };

      console.log('ğŸ“¦ ì €ì¥í•  ë°ì´í„°:', signupData);

      // ì‚¬ì—…ìë²ˆí˜¸ê°€ ìˆì„ ë•Œë§Œ localStorageì— ì €ì¥
      if (signupData.businessNumber && signupData.businessNumber.trim() !== '') {
        localStorage.setItem('pendingSellerSignup', JSON.stringify(signupData));
        console.log('âœ… íŒë§¤ì ê°€ì… ì •ë³´ localStorageì— ì €ì¥ ì™„ë£Œ');
        console.log('   â†’ ì‚¬ì—…ìë²ˆí˜¸:', signupData.businessNumber);
      } else {
        console.log('âš ï¸ ì‚¬ì—…ìë²ˆí˜¸ ì—†ìŒ - ì¼ë°˜ ê³ ê° ê°€ì…');
        // í˜¹ì‹œ ì´ì „ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚­ì œ
        localStorage.removeItem('pendingSellerSignup');
      }

    } catch (error) {
      console.error('âŒ ë°ì´í„° ì €ì¥ ì¤‘ ì—ëŸ¬:', error);
    }

    // ì¹´í˜24 í¼ ì œì¶œì€ ì •ìƒì ìœ¼ë¡œ ì§„í–‰
    // (return true ë˜ëŠ” ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ)
  });

  console.log('âœ… íšŒì›ê°€ì… í¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
})();
</script>

<!--
  ========================================
  ì„¤ì¹˜ ì™„ë£Œ!
  ========================================

  âœ… ë‹¤ìŒ ë‹¨ê³„:
  1. ì €ì¥ ë²„íŠ¼ í´ë¦­
  2. ìºì‹œ ì´ˆê¸°í™” (ì¹´í˜24 ê´€ë¦¬ì > ë””ìì¸ í¸ì§‘ > ìºì‹œ ì´ˆê¸°í™”)
  3. member_result.html íŒŒì¼ì—ë„ ì½”ë“œ ì¶”ê°€
  4. í…ŒìŠ¤íŠ¸ íšŒì›ê°€ì…

  ğŸ” ë””ë²„ê¹…:
  - F12 > Console íƒ­ì—ì„œ ë¡œê·¸ í™•ì¸
  - F12 > Application íƒ­ > Local Storage í™•ì¸
  - 'pendingSellerSignup' í‚¤ì— ë°ì´í„° ì €ì¥ë˜ëŠ”ì§€ í™•ì¸

  ğŸ“ ì°¸ê³ :
  - ì´ ì½”ë“œëŠ” íšŒì›ê°€ì… í¼ ì œì¶œì„ ë°©í•´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
  - ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ localStorageì— ë³µì‚¬ ì €ì¥í•©ë‹ˆë‹¤
  - íšŒì›ê°€ì… ì™„ë£Œ í˜ì´ì§€ì—ì„œ ì´ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤
-->
